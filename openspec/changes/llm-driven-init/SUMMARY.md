# LLM-Driven Init - Change Proposal Summary

## Core Concept

**Transform Telos from a CLI-driven Q&A tool into a slash command-driven
AI-native initialization system.**

## The New Architecture

```
┌─────────────────────────────────────────────────────────────┐
│  USER WORKFLOW                                              │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  Step 1: Install Telos                                      │
│  $ npm install -g telos-framework                           │
│  (or /plugin marketplace add telos/framework)               │
│                                                             │
│  Step 2: Run CLI Installer                                  │
│  $ telos init                                               │
│  ✓ Installed /telos-init, /telos-validate, /telos-status   │
│  ✓ Created AGENTS.md and CLAUDE.md templates               │
│  → Next step: Run /telos-init to complete setup            │
│                                                             │
│  Step 3: AI-Driven Discovery                                │
│  > /telos-init                                              │
│  [Claude analyzes codebase]                                 │
│  [Proposes L9→L1 hierarchy with reasoning]                 │
│  [User reviews L9-L5 strategic layers]                     │
│  [Claude generates all Telos files]                         │
│  ✓ Ready to develop with 9-level multi-agent system        │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## Role Separation

### CLI (npm package) - Installer Only

**Responsibilities:**

- Copy slash command files to `.claude/commands/telos/`
- Create AGENTS.md from template
- Create CLAUDE.md from template
- Detect platform (Claude Code / OpenCode / Cursor)
- Exit with "Next: Run /telos-init"

**NOT Responsible For:**

- ❌ Asking user questions
- ❌ Analyzing codebase
- ❌ Generating agents
- ❌ Interactive prompts

### Slash Commands (AI-executed) - Intelligence Layer

**Responsibilities:**

- `/telos-init`: Analyze codebase, propose hierarchy, generate all Telos files
- `/telos-validate`: Check alignment with Telos across codebase
- `/telos-status`: Show current Telos configuration
- `/telos-reset`: Clear and restart initialization

**Core Intelligence:**

- ✅ Read README, package.json, source code
- ✅ Infer purpose from project context
- ✅ Auto-generate L1-L4 from detected tools
- ✅ Propose L5-L9 for user review
- ✅ Create all agent definitions with context

## Key Benefits

### 1. **AI-Native Analysis**

- Claude reads files directly (no JavaScript regex scanning needed)
- Adapts to any language/framework Claude understands
- More accurate than hardcoded pattern matching

### 2. **Reduced User Burden**

- Before: 12 detailed questions, ~10 minutes
- After: 2-3 strategic refinements, ~2 minutes

### 3. **Clear Separation of Concerns**

- CLI = File installation (runs once)
- AI = Intelligent discovery (can run multiple times)

### 4. **Plugin-Friendly Distribution**

- `/plugin install telos` bundles commands directly
- No npm global install needed
- Auto-updates via plugin marketplace

### 5. **Iterative Refinement**

- Can re-run `/telos-init` to refine hierarchy
- Don't need to reinstall CLI each time
- Conversational editing of strategic layers

## File Structure After Installation

```
your-project/
├── .claude/
│   └── commands/
│       └── telos/
│           ├── init.md          # Main initialization
│           ├── validate.md      # Alignment check
│           ├── status.md        # Current config
│           └── reset.md         # Clear and restart
├── telos/
│   ├── content/
│   │   └── TELOS.md            # Generated by /telos-init
│   └── agents/
│       ├── l9-telos-guardian.md   # Generated by /telos-init
│       ├── l8-market-analyst.md
│       ├── l7-insight-synthesizer.md
│       ├── l6-ux-simulator.md
│       ├── l5-journey-validator.md
│       ├── l4-integration-contractor.md
│       ├── l3-component-architect.md
│       ├── l2-function-author.md
│       └── l1-syntax-linter.md
├── logos/
│   └── orchestrator.js         # Generated by /telos-init
├── AGENTS.md                   # Created by CLI installer
└── CLAUDE.md                   # Created by CLI installer
```

## Breaking Changes

1. **`telos init` behavior changes:**
   - Before: Runs interactive prompts
   - After: Installs files and exits
   - Migration: Users must run `/telos-init` after `telos init`

2. **No more CLI-based discovery:**
   - Before: JavaScript code scans project
   - After: AI reads project directly via slash command
   - Migration: Remove dependencies on `lib/discovery/telos-discovery.js` and
     `hierarchy-builder.js`

## Implementation Phases

### Phase 1: Build Slash Commands (Tasks 1-3)

- Create `/telos-init` with full analysis prompt
- Create `/telos-validate`, `/telos-status`, `/telos-reset`
- Create AGENTS.md and CLAUDE.md templates

### Phase 2: Convert CLI to Installer (Task 6)

- Rewrite `lib/commands/init.js` to install files only
- Create `lib/installers/slash-commands.js`
- Create `lib/installers/memory-files.js`
- Remove old interactive prompt code

### Phase 3: Plugin Distribution (Task 4, 8)

- Create `.claude-plugin/plugin.json`
- Publish to plugin marketplace
- Test installation via `/plugin install telos`

### Phase 4: Testing & Documentation (Tasks 9-11)

- Test across Claude Code, OpenCode, Cursor
- Update README, USAGE, TROUBLESHOOTING
- Create video demo of new workflow

## Success Metrics

- **Time to initialize**: 10 min → 2 min
- **Questions asked**: 12 → 2-3
- **User satisfaction**: Measure via feedback
- **Accuracy of L1-L4**: Compare AI-inferred vs human-written
- **Adoption of slash commands**: Track `/telos-init` usage vs CLI

## Open Questions Resolved

1. **Q: Should CLI do any analysis?**
   - A: No. CLI only installs files. All intelligence in slash commands.

2. **Q: Where do templates live?**
   - A: Agent templates embedded in `/telos-init` prompt. AGENTS.md/CLAUDE.md in
     `templates/` folder.

3. **Q: Can user re-run `/telos-init`?**
   - A: Yes! It's conversational, can iterate without reinstalling.

4. **Q: What if user doesn't have Claude Code?**
   - A: CLI still works to install files. User needs AI assistant to run slash
     commands.

5. **Q: How do we version slash commands?**
   - A: Plugin versioning or npm package version (commands bundled with package)

---

**Validation Status:** ✅ `openspec validate llm-driven-init --strict` passes

**Ready for:** Implementation approval
